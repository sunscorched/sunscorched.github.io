---
layout: archive
author_profile: true
---

{% assign target_year = page.year %}
{% assign target_year_str = page.year | append: "" %}

<h2 class="archive__subtitle">{{ target_year }}</h2>

{%- comment -%}
Filter posts for this year (works on GitHub Pages)
{%- endcomment -%}
{% assign posts_by_year = site.posts | where_exp: "post", "post.date | date: '%Y' == target_year_str" %}

{% for post in posts_by_year %}
  {% include archive-single.html %}
{% endfor %}

{%- comment -%}
Check if posts exist in adjacent years
(This avoids fragile year list logic entirely)
{%- endcomment -%}
{% assign prev_year = target_year | minus: 1 %}
{% assign next_year = target_year | plus: 1 %}

{% assign prev_year_str = prev_year | append: "" %}
{% assign next_year_str = next_year | append: "" %}

{% assign has_prev = false %}
{% assign has_next = false %}

{% for post in site.posts %}
  {% assign post_year = post.date | date: "%Y" %}
  {% if post_year == prev_year_str %}
    {% assign has_prev = true %}
  {% endif %}
  {% if post_year == next_year_str %}
    {% assign has_next = true %}
  {% endif %}
{% endfor %}

<div style="display:flex; justify-content:space-between; margin-top:2.5em; font-weight:600;">
  <div>
    {% if has_next %}
      <a href="/year-archive-{{ next_year }}/">← {{ next_year }}</a>
    {% endif %}
  </div>

  <div>
    {% if has_prev %}
      <a href="/year-archive-{{ prev_year }}/">{{ prev_year }} →</a>
    {% endif %}
  </div>
</div>

{%- comment -%}
Optional: Clean year index (only shows years that actually have posts)
{%- endcomment -%}
<div style="text-align:center; margin-top:1.5em; font-size:0.95em;">
  {% assign years = "" | split: "" %}
  {% for post in site.posts %}
    {% assign y = post.date | date: "%Y" %}
    {% unless years contains y %}
      {% assign years = years | push: y %}
    {% endunless %}
  {% endfor %}
  {% assign years = years | sort | reverse %}

  {% for y in years %}
    {% if y == target_year_str %}
      <strong>{{ y }}</strong>
    {% else %}
      <a href="/year-archive-{{ y }}/">{{ y }}</a>
    {% endif %}
    {% unless forloop.last %} | {% endunless %}
  {% endfor %}
</div>
