---
layout: archive
author_profile: true
---

{% include base_path %}

<h2 class="archive__subtitle">{{ page.year }}</h2>

{%- comment -%}
Collect all years safely (GitHub Pages compatible)
{%- endcomment -%}

{% assign years_string = "" %}

{% for post in site.posts %}
  {% assign y = post.date | date: "%Y" %}
  {% unless years_string contains y %}
    {% assign years_string = years_string | append: y | append: "," %}
  {% endunless %}
{% endfor %}

{% assign years = years_string | split: "," | sort %}

{%- comment -%}
Find index of current year
{%- endcomment -%}

{% assign current_index = nil %}
{% for y in years %}
  {% if y == page.year %}
    {% assign current_index = forloop.index0 %}
  {% endif %}
{% endfor %}

{%- comment -%}
List posts for this year
{%- endcomment -%}

{% for post in site.posts %}
  {% assign post_year = post.date | date: "%Y" %}
  {% if post_year == page.year %}
    {% include archive-single.html %}
  {% endif %}
{% endfor %}

<hr style="margin:2em 0;">

<div class="year-navigation" style="display:flex; justify-content:space-between; align-items:center;">
  
  <div>
    {% if current_index and current_index > 0 %}
      {% assign prev_index = current_index | minus: 1 %}
      {% assign prev_year = years[prev_index] %}
      <a href="{{ base_path }}/year-archive-{{ prev_year }}/">← {{ prev_year }}</a>
    {% endif %}
  </div>

  <div>
    <a href="{{ base_path }}/year-archive/">All Years</a>
  </div>

  <div>
    {% if current_index and current_index < years.size | minus: 1 %}
      {% assign next_index = current_index | plus: 1 %}
      {% assign next_year = years[next_index] %}
      <a href="{{ base_path }}/year-archive-{{ next_year }}/">{{ next_year }} →</a>
    {% endif %}
  </div>

</div>
